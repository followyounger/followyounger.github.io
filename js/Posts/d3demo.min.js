window.addEventListener("soptlog_d3_loaded",function(a){var e={top:20,right:30,bottom:30,left:50},c=960-e.left-e.right,k=500-e.top-e.bottom;var i=d3.scale.ordinal().rangeRoundBands([0,c],0.1);var h=d3.scale.linear().range([k,0]);var d=d3.svg.axis().scale(i).orient("bottom");var b=d3.svg.axis().scale(h).orient("left").ticks(10);var l=d3.svg.line().x(function(m){return i(m.letter)+i.rangeBand()/2}).y(function(m){return h(m.frequency)}).interpolate("monotone");var j=d3.svg.line().x(function(m){return i(m.letter)+i.rangeBand()/2}).y(function(m){return h(m.frequency)}).interpolate("basis");var f=d3.select("#bar-chart").append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 960 500").append("g").attr("transform","translate("+e.left+","+e.top+")");d3.json("/data/d3demo/bar-chart.json",function(m,p){if(m){throw m}i.domain(p.map(function(s){return s.letter}));h.domain([0,d3.max(p,function(s){return s.frequency})]);f.append("g").attr("class","x axis").attr("transform","translate(0,"+k+")").call(d);f.append("g").attr("class","y axis").call(b).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Number of Years");f.selectAll(".bar").data(p).enter().append("rect").attr("class","bar").attr("x",function(s){return i(s.letter)}).attr("width",i.rangeBand()).attr("y",k).attr("height",0).transition().duration(500).delay(function(t,s){return 100*s}).attr("y",function(s){return h(s.frequency)}).attr("height",function(s){return k-h(s.frequency)});var r=f.append("path").attr("d",l(p)).attr("stroke","green").attr("stroke-width",2).attr("fill","none");var o=r.node().getTotalLength();r.attr("stroke-dasharray",o+" "+o).attr("stroke-dashoffset",o).transition().delay(500).duration(4000).ease("linear").attr("stroke-dashoffset",0);var q=f.append("path").attr("d",j(p)).attr("stroke","red").attr("stroke-width",2).attr("fill","none");var n=q.node().getTotalLength();q.attr("stroke-dasharray",n+" "+n).attr("stroke-dashoffset",n).transition().delay(500).duration(4000).ease("linear").attr("stroke-dashoffset",0);f.selectAll(".barNum").data(p).enter().append("text").attr("class","barNum").attr("x",function(s){return i(s.letter)+i.rangeBand()/2}).attr("y",function(s){return h(s.frequency)-20}).attr("dy",".71em").style("text-anchor","middle").text(function(t,s){return p[s].frequency})});function g(m){m.frequency=+m.frequency;return m}});